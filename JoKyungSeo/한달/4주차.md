- 이력서 작성 마무리
- Redis 학습

```txt
  Redis는 key-value 형식으로 set,get 시간복잡도가 기본적으로 O(1)이다.
  하지만 데이터 전체조회, 전체 삭제 같은 명령어는 시간복잡도가 O(n)이다.
  Redis가 싱글스레드여서 위와 같은 명령어를 사용하게 되면 뒤에 명령어들은 대기상태에 들어가기 때문에 사용을 지양하는 것이 좋다.

  Redis 명령어 하나 당 1회씩 request/response가 일어난다. 따라서, 명령어가 5개라면 5번의 요청과 응답이 발생한다. 이런 이유는 Redis가 TCP를 기반으로 하기 때문이다. 그러므로 많은 각각의 명령어들은 네트워크IO에 대한 병목현상을 발생 시킨다.

  이럴 때 사용하는 것이 pipline인데 트랜잭션과 마찬가지로 여러 명령어를 한번에 쌓아서 서버에 전송하고, 중간에 다른 명령어가 수행될 수 있다.
  그렇지만 트랜잭션은 한번 multi로 명령어들을 묶어서 exec으로 실행하면 다른 명령어가 중간에 끼지 못한다.

  여기서 Redis의 트랜잭션의 개념은 일반 DB와는 조금 다르다.
  일반 DB에서의 트랜잭션은 ACID를 보장하는 작업단위이지만, Redis의 트랜잭션은 독립적인 작업단위일 뿐이고, 롤백을 지원하지 않는다.
  롤백을 지원하지 않기 때문에 Redis는 빠른 성능을 유지할 수 있는데, 롤백을 지원하지 않더라도 Redis에서 발생하는 대부분의 에러는 개발 단계에서 잡을 수 있는 에러이기 때문에 롤백을 지원하지 않는다고 한다.

  multi의 경우 기본적으로 pipeline을 생성하며, node-redis의 경우 auto-pipelining을 제공한다.

```

- SNS 서비스 multer와 AWS S3 v3 적용

```txt
  multer는 파일을 전송할 때 사용하는 multipart/form-data(멀티파트 형식의 폼)을 핸들링하기 위한 node의 미들웨어이다.

  multer를 사용하면 서버 디스크나 메모리에 데이터를 저장하게 된다. 이게 계속되면 서버에 부담이 될 것이고 서버에 문제가 생겼을 때 파일이 손상될 수 있다. 그래서 클라우드 데이터 저장소 같은 역할을 하는 AWS S3를 적용했다.

  AWS의 기능을 노드에서 사용하려면 aws-sdk를 설치해야 한다. 이 때 aws-sdk는 v2이고 @aws-sdk/client-s3는 v3이다. 환경변수 설정은 두 버전이 같지만, v3의 경우는 사용할 서비스별로 패키지를 설치해야 한다.

  둘 다 사용해본 결과, v3는 업로드 후 결과 반환 시 주는 정보가 별로 없다. 예를 들어, v2는 url을 반환하지만 v3는 그렇지 않다.
  지금도 깃허브 star수와 npm을 보면 v3보다는 v2를 훨씬 더 많이 사용하는데 v2가 더 적용하기 편리한 점이 있기 때문인 것 같다.

```
